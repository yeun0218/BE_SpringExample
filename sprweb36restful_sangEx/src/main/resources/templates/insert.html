<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>상품 추가</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
function insertSangpum(){
	const form = document.querySelector("form");
	const formData = new FormData(form);
	
	fetch(`/api/sangpums`, {
		method : "POST",
		body : formData
	})
	.then(response => {
		if(!response.ok) throw new Error("상품 추가 실패");
		return response.json();
	})
	.then(data => {
		if(data.isSuccess){
			alert("상품 추가 성공");
			location.href=`/sangpums/list`;
		}
	})
	.catch(error => {
		console.log("오류 : ", error);
	});
}
</script>
</head>
<body>
<div class="container mt-5">
	<h2 class="text-center">** 상품 추가 **</h2>
	<p class="text-center">상품 정보를 입력하세요.</p>
	<div class="row justify-content-center">
		<div class="col-md-6">
			<form onsubmit="event.preventDefault(); insertSangpum()" class="p-4 border rounded">
				<div class="mb-3">
					<label for="code" class="form-label">번 호</label>
					<input type="text" class="form-control" id="code" name="code">
				</div>
				<div class="mb-3">
					<label for="sang" class="form-label">이 름</label>
					<input type="text" class="form-control" id="sang" name="sang">
				</div>
				<div class="mb-3">
					<label for="su" class="form-label">수 량</label>
					<input type="text" class="form-control" id="su" name="su">
				</div>
				<div class="mb-3">
					<label for="dan" class="form-label">단 가</label>
					<input type="text" class="form-control" id="dan" name="dan">
				</div>
				<div class="text-center">
					<input type="submit" class="btn btn-primary" value="추가">
				</div>
			</form>
		</div>
	</div>
</div>
</body>
</html>
